{"version":3,"sources":["../../src/middleware/httpErrors.js"],"names":["createErrorClass","require","HttpError","res","ctx","msg","method","url","statusCode","statusMessage","message","trim","response","request","options","module","exports","onResponse","isHttpError"],"mappings":";;AAAA,MAAMA,mBAAmBC,QAAQ,oBAAR,CAAzB;;AAEA,MAAMC,YAAYF,iBAAiB,WAAjB,EAA8B,UAASG,GAAT,EAAcC,GAAd,EAAmB;AACjE,MAAIC,MAAO,GAAEF,IAAIG,MAAO,eAAcH,IAAII,GAAI,cAA9C;AACAF,SAAQ,QAAOF,IAAIK,UAAW,IAAGL,IAAIM,aAAc,EAAnD;;AAEA,OAAKC,OAAL,GAAeL,IAAIM,IAAJ,EAAf;AACA,OAAKC,QAAL,GAAgBT,GAAhB;AACA,OAAKU,OAAL,GAAeT,IAAIU,OAAnB;AACD,CAPiB,CAAlB;;AASAC,OAAOC,OAAP,GAAiB,OAAO;AACtBC,cAAY,CAACd,GAAD,EAAMC,GAAN,KAAc;AACxB,UAAMc,cAAcf,IAAIK,UAAJ,IAAkB,GAAtC;AACA,QAAI,CAACU,WAAL,EAAkB;AAChB,aAAOf,GAAP;AACD;;AAED,UAAM,IAAID,SAAJ,CAAcC,GAAd,EAAmBC,GAAnB,CAAN;AACD;AARqB,CAAP,CAAjB","file":"httpErrors.js","sourcesContent":["const createErrorClass = require('create-error-class')\n\nconst HttpError = createErrorClass('HttpError', function(res, ctx) {\n  let msg = `${res.method}-request to ${res.url} resulted in`\n  msg += `HTTP ${res.statusCode} ${res.statusMessage}`\n\n  this.message = msg.trim()\n  this.response = res\n  this.request = ctx.options\n})\n\nmodule.exports = () => ({\n  onResponse: (res, ctx) => {\n    const isHttpError = res.statusCode >= 400\n    if (!isHttpError) {\n      return res\n    }\n\n    throw new HttpError(res, ctx)\n  }\n})\n"]}