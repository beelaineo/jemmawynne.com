{"version":3,"sources":["../index.js"],"names":[],"mappings":";;;;;qBAAwB,MAAM;;AAAf,SAAS,MAAM,CAAC,EAAE,EAAE;AACjC,MAAI,SAAS,YAAA,CAAA;AACb,MAAI,OAAO,YAAA,CAAA;AACX,MAAI,OAAO,YAAA,CAAA;AACX,MAAI,MAAM,YAAA,CAAA;AACV,SAAO,YAAmB;;;AAGxB,aAAS,GAAG,EAAE,4BAAS,CAAA;AACvB,QAAI,CAAC,OAAO,EAAE;AACZ,aAAO,GAAG,IAAI,OAAO,CAAC,UAAC,QAAQ,EAAE,OAAO,EAAK;AAC3C,eAAO,GAAG,QAAQ,CAAA;AAClB,cAAM,GAAG,OAAO,CAAA;OACjB,CAAC,CAAA;KACH;AACD,aAAS,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAA;AACzE,WAAO,OAAO,CAAA;GACf,CAAA;AACD,WAAS,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE;AAC/B,QAAI,OAAO,KAAK,SAAS,EAAE;AACzB,aAAO,GAAG,IAAI,CAAA;AACd,aAAO,CAAC,KAAK,CAAC,CAAA;KACf;GACF;;AAED,WAAS,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE;AAC5B,QAAI,OAAO,KAAK,SAAS,EAAE;AACzB,aAAO,GAAG,IAAI,CAAA;AACd,YAAM,CAAC,KAAK,CAAC,CAAA;KACd;GACF;CACF","file":"index.js","sourcesContent":["export default function latest(fn) {\n  let lastAdded\n  let pending\n  let resolve\n  let reject\n  return function (...args) {\n    // in the future if/when promises gets cancellable, we could abort the previous here like this\n    // lastAdded.cancel()\n    lastAdded = fn(...args)\n    if (!pending) {\n      pending = new Promise((_resolve, _reject) => {\n        resolve = _resolve\n        reject = _reject\n      })\n    }\n    lastAdded.then(fulfill.bind(null, lastAdded), fail.bind(null, lastAdded))\n    return pending\n  }\n  function fulfill(promise, value) {\n    if (promise === lastAdded) {\n      pending = null\n      resolve(value)\n    }\n  }\n\n  function fail(promise, error) {\n    if (promise === lastAdded) {\n      pending = null\n      reject(error)\n    }\n  }\n}\n"]}