(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SanityClient = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var isObj=require("is-obj"),hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(r){if(null==r)throw new TypeError("Sources cannot be null or undefined");return Object(r)}function assignKey(r,e,n){var t=e[n];if(null!=t){if(hasOwnProperty.call(r,n)&&(void 0===r[n]||null===r[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");hasOwnProperty.call(r,n)&&isObj(t)?r[n]=assign(Object(r[n]),e[n]):r[n]=t}}function assign(r,e){if(r===e)return r;for(var n in e=Object(e))hasOwnProperty.call(e,n)&&assignKey(r,e,n);if(Object.getOwnPropertySymbols)for(var t=Object.getOwnPropertySymbols(e),o=0;o<t.length;o++)propIsEnumerable.call(e,t[o])&&assignKey(r,e,t[o]);return r}module.exports=function(r){r=toObject(r);for(var e=1;e<arguments.length;e++)assign(r,arguments[e]);return r};

},{"is-obj":18}],2:[function(require,module,exports){
!function(t){if(!t.EventSource||t._eventSourceImportPrefix){var e=(t._eventSourceImportPrefix||"")+"EventSource",i=function(t,e){if(!t||"string"!=typeof t)throw new SyntaxError("Not enough arguments");this.URL=t,this.setOptions(e);var i=this;setTimeout(function(){i.poll()},0)};if(i.prototype={CONNECTING:0,OPEN:1,CLOSED:2,defaultOptions:{loggingEnabled:!1,loggingPrefix:"eventsource",interval:500,bufferSizeLimit:262144,silentTimeout:3e5,getArgs:{evs_buffer_size_limit:262144},xhrHeaders:{Accept:"text/event-stream","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}},setOptions:function(t){var e,i=this.defaultOptions;for(e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);for(e in t)e in i&&t.hasOwnProperty(e)&&(this[e]=t[e]);this.getArgs&&this.bufferSizeLimit&&(this.getArgs.evs_buffer_size_limit=this.bufferSizeLimit),"undefined"!=typeof console&&void 0!==console.log||(this.loggingEnabled=!1)},log:function(t){this.loggingEnabled&&console.log("["+this.loggingPrefix+"]:"+t)},poll:function(){try{if(this.readyState==this.CLOSED)return;this.cleanup(),this.readyState=this.CONNECTING,this.cursor=0,this.cache="",this._xhr=new this.XHR(this),this.resetNoActivityTimer()}catch(t){this.log("There were errors inside the pool try-catch"),this.dispatchEvent("error",{type:"error",data:t.message})}},pollAgain:function(t){var e=this;e.readyState=e.CONNECTING,e.dispatchEvent("error",{type:"error",data:"Reconnecting "}),this._pollTimer=setTimeout(function(){e.poll()},t||0)},cleanup:function(){this.log("evs cleaning up"),this._pollTimer&&(clearInterval(this._pollTimer),this._pollTimer=null),this._noActivityTimer&&(clearInterval(this._noActivityTimer),this._noActivityTimer=null),this._xhr&&(this._xhr.abort(),this._xhr=null)},resetNoActivityTimer:function(){if(this.silentTimeout){this._noActivityTimer&&clearInterval(this._noActivityTimer);var t=this;this._noActivityTimer=setTimeout(function(){t.log("Timeout! silentTImeout:"+t.silentTimeout),t.pollAgain()},this.silentTimeout)}},close:function(){this.readyState=this.CLOSED,this.log("Closing connection. readyState: "+this.readyState),this.cleanup()},ondata:function(){var t=this._xhr;if(t.isReady()&&!t.hasError()){this.resetNoActivityTimer(),this.readyState==this.CONNECTING&&(this.readyState=this.OPEN,this.dispatchEvent("open",{type:"open"}));var e=t.getBuffer();e.length>this.bufferSizeLimit&&(this.log("buffer.length > this.bufferSizeLimit"),this.pollAgain()),0==this.cursor&&e.length>0&&"\ufeff"==e.substring(0,1)&&(this.cursor=1);var i=this.lastMessageIndex(e);if(i[0]>=this.cursor){var r=i[1],s=e.substring(this.cursor,r);this.parseStream(s),this.cursor=r}t.isDone()&&(this.log("request.isDone(). reopening the connection"),this.pollAgain(this.interval))}else this.readyState!==this.CLOSED&&(this.log("this.readyState !== this.CLOSED"),this.pollAgain(this.interval))},parseStream:function(t){var e,i,r,n,a,o,h=(t=this.cache+this.normalizeToLF(t)).split("\n\n");for(e=0;e<h.length-1;e++){for(r="message",n=[],parts=h[e].split("\n"),i=0;i<parts.length;i++)0==(a=this.trimWhiteSpace(parts[i])).indexOf("event")?r=a.replace(/event:?\s*/,""):0==a.indexOf("retry")?(o=parseInt(a.replace(/retry:?\s*/,"")),isNaN(o)||(this.interval=o)):0==a.indexOf("data")?n.push(a.replace(/data:?\s*/,"")):0==a.indexOf("id:")?this.lastEventId=a.replace(/id:?\s*/,""):0==a.indexOf("id")&&(this.lastEventId=null);if(n.length){var u=new s(r,n.join("\n"),window.location.origin,this.lastEventId);this.dispatchEvent(r,u)}}this.cache=h[h.length-1]},dispatchEvent:function(t,e){var i=this["_"+t+"Handlers"];if(i)for(var r=0;r<i.length;r++)i[r].call(this,e);this["on"+t]&&this["on"+t].call(this,e)},addEventListener:function(t,e){this["_"+t+"Handlers"]||(this["_"+t+"Handlers"]=[]),this["_"+t+"Handlers"].push(e)},removeEventListener:function(t,e){var i=this["_"+t+"Handlers"];if(i)for(var r=i.length-1;r>=0;--r)if(i[r]===e){i.splice(r,1);break}},_pollTimer:null,_noactivityTimer:null,_xhr:null,lastEventId:null,cache:"",cursor:0,onerror:null,onmessage:null,onopen:null,readyState:0,urlWithParams:function(t,e){var i=[];if(e){var r,s,n=encodeURIComponent;for(r in e)e.hasOwnProperty(r)&&(s=n(r)+"="+n(e[r]),i.push(s))}return i.length>0?-1==t.indexOf("?")?t+"?"+i.join("&"):t+"&"+i.join("&"):t},lastMessageIndex:function(t){var e=t.lastIndexOf("\n\n"),i=t.lastIndexOf("\r\r"),r=t.lastIndexOf("\r\n\r\n");return r>Math.max(e,i)?[r,r+4]:[Math.max(e,i),Math.max(e,i)+2]},trimWhiteSpace:function(t){return t.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")},normalizeToLF:function(t){return t.replace(/\r\n|\r/g,"\n")}},window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType){i.isPolyfill="IE_8-9";var r=i.prototype.defaultOptions;r.xhrHeaders=null,r.getArgs.evs_preamble=2056,i.prototype.XHR=function(t){request=new XDomainRequest,this._request=request,request.onprogress=function(){request._ready=!0,t.ondata()},request.onload=function(){this._loaded=!0,t.ondata()},request.onerror=function(){this._failed=!0,t.readyState=t.CLOSED,t.dispatchEvent("error",{type:"error",data:"XDomainRequest error"})},request.ontimeout=function(){this._failed=!0,t.readyState=t.CLOSED,t.dispatchEvent("error",{type:"error",data:"XDomainRequest timed out"})};var e={};if(t.getArgs){var i=t.getArgs;for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r]);t.lastEventId&&(e.evs_last_event_id=t.lastEventId)}request.open("GET",t.urlWithParams(t.URL,e)),request.send()},i.prototype.XHR.prototype={useXDomainRequest:!0,_request:null,_ready:!1,_loaded:!1,_failed:!1,isReady:function(){return this._request._ready},isDone:function(){return this._request._loaded},hasError:function(){return this._request._failed},getBuffer:function(){var t="";try{t=this._request.responseText||""}catch(t){}return t},abort:function(){this._request&&this._request.abort()}}}else i.isPolyfill="XHR",i.prototype.XHR=function(t){request=new XMLHttpRequest,this._request=request,t._xhr=this,request.onreadystatechange=function(){request.readyState>1&&t.readyState!=t.CLOSED&&(200==request.status||request.status>=300&&request.status<400?t.ondata():(request._failed=!0,t.readyState=t.CLOSED,t.dispatchEvent("error",{type:"error",data:"The server responded with "+request.status}),t.close()))},request.onprogress=function(){},request.open("GET",t.urlWithParams(t.URL,t.getArgs),!0);var e=t.xhrHeaders;for(var i in e)e.hasOwnProperty(i)&&request.setRequestHeader(i,e[i]);t.lastEventId&&request.setRequestHeader("Last-Event-Id",t.lastEventId),request.send()},i.prototype.XHR.prototype={useXDomainRequest:!1,_request:null,_failed:!1,isReady:function(){return this._request.readyState>=2},isDone:function(){return 4==this._request.readyState},hasError:function(){return this._failed||this._request.status>=400},getBuffer:function(){var t="";try{t=this._request.responseText||""}catch(t){}return t},abort:function(){this._request&&this._request.abort()}};t[e]=i}function s(t,e,i,r){this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.data=e||null,this.origin=i||"",this.lastEventId=r||"",this.type=t||"message"}}(this);

},{}],3:[function(require,module,exports){
"use strict";var isCallable=require("is-callable"),toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,forEachArray=function(r,t,a){for(var o=0,l=r.length;o<l;o++)hasOwnProperty.call(r,o)&&(null==a?t(r[o],o,r):t.call(a,r[o],o,r))},forEachString=function(r,t,a){for(var o=0,l=r.length;o<l;o++)null==a?t(r.charAt(o),o,r):t.call(a,r.charAt(o),o,r)},forEachObject=function(r,t,a){for(var o in r)hasOwnProperty.call(r,o)&&(null==a?t(r[o],o,r):t.call(a,r[o],o,r))},forEach=function(r,t,a){if(!isCallable(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=a),"[object Array]"===toStr.call(r)?forEachArray(r,t,o):"string"==typeof r?forEachString(r,t,o):forEachObject(r,t,o)};module.exports=forEach;

},{"is-callable":17}],4:[function(require,module,exports){
module.exports=require("./lib-node");

},{"./lib-node":5}],5:[function(require,module,exports){
"use strict";var pubsub=require("nano-pubsub"),middlewareReducer=require("./util/middlewareReducer"),processOptions=require("./middleware/defaultOptionsProcessor"),validateOptions=require("./middleware/defaultOptionsValidator"),httpRequest=require("./request"),channelNames=["request","response","progress","error","abort"],middlehooks=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];module.exports=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=middlehooks.reduce(function(e,r){return e[r]=e[r]||[],e},{processOptions:[processOptions],validateOptions:[validateOptions]});function o(e){var r=channelNames.reduce(function(e,r){return e[r]=pubsub(),e},{}),t=middlewareReducer(n),o=t("processOptions",e);t("validateOptions",o);var s={options:o,channels:r,applyMiddleware:t},i=null,u=r.request.subscribe(function(e){i=httpRequest(e,function(n,o){return function(e,n,o){var s=e,i=n;if(!s)try{i=t("onResponse",n,o)}catch(e){i=null,s=e}(s=s&&t("onError",s,o))?r.error.publish(s):i&&r.response.publish(i)}(n,o,e)})});r.abort.subscribe(function(){u(),i&&i.abort()});var a=t("onReturn",r,s);return a===r&&r.request.publish(s),a}return o.use=function(e){if(!e)throw new Error("Tried to add middleware that resolved to falsey value");if("function"==typeof e)throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(e.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return middlehooks.forEach(function(r){e[r]&&n[r].push(e[r])}),t.push(e),o},o.clone=function(){return e(t)},r.forEach(o.use),o};

},{"./middleware/defaultOptionsProcessor":6,"./middleware/defaultOptionsValidator":7,"./request":14,"./util/middlewareReducer":16,"nano-pubsub":22}],6:[function(require,module,exports){
"use strict";var objectAssign=require("object-assign"),urlParse=require("url-parse"),isReactNative="undefined"!=typeof navigator&&"ReactNative"===navigator.product,has=Object.prototype.hasOwnProperty,defaultOptions={timeout:isReactNative?6e4:12e4};function stringifyQueryString(e){var t=[];for(var r in e)has.call(e,r)&&n(r,e[r]);return t.length?t.join("&"):"";function n(e,r){Array.isArray(r)?r.forEach(function(t){return n(e,t)}):t.push([e,r].map(encodeURIComponent).join("="))}}function normalizeTimeout(e){if(!1===e||0===e)return!1;if(e.connect||e.socket)return e;var t=Number(e);return isNaN(t)?normalizeTimeout(defaultOptions.timeout):{connect:t,socket:t}}function removeUndefined(e){var t={};for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}module.exports=function(e){var t="string"==typeof e?objectAssign({url:e},defaultOptions):objectAssign({},defaultOptions,e),r=urlParse(t.url,{},!0);return t.timeout=normalizeTimeout(t.timeout),t.query&&(r.query=objectAssign({},r.query,removeUndefined(t.query))),t.method=t.body&&!t.method?"POST":(t.method||"GET").toUpperCase(),t.url=r.toString(stringifyQueryString),t};

},{"object-assign":23,"url-parse":56}],7:[function(require,module,exports){
"use strict";var validUrl=/^https?:\/\//i;module.exports=function(r){if(!validUrl.test(r.url))throw new Error('"'+r.url+'" is not a valid URL')};

},{}],8:[function(require,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},objectAssign=require("object-assign"),isPlainObject=require("is-plain-object"),serializeTypes=["boolean","string","number"],isBuffer=function(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)};module.exports=function(){return{processOptions:function(o){var e=o.body;return e&&!("function"==typeof e.pipe)&&!isBuffer(e)&&(-1!==serializeTypes.indexOf(void 0===e?"undefined":_typeof(e))||Array.isArray(e)||isPlainObject(e))?objectAssign({},o,{body:JSON.stringify(o.body),headers:objectAssign({},o.headers,{"Content-Type":"application/json"})}):o}}};

},{"is-plain-object":19,"object-assign":23}],9:[function(require,module,exports){
"use strict";var objectAssign=require("object-assign");function tryParse(e){try{return JSON.parse(e)}catch(e){throw e.message="Failed to parsed response body as JSON: "+e.message,e}}module.exports=function(e){return{onResponse:function(s){var t=s.headers["content-type"]||"",n=e&&e.force||-1!==t.indexOf("application/json");return s.body&&t&&n?objectAssign({},s,{body:tryParse(s.body)}):s},processOptions:function(e){return objectAssign({},e,{headers:objectAssign({Accept:"application/json"},e.headers)})}}};

},{"object-assign":23}],10:[function(require,module,exports){
"use strict";var global=require("../util/global"),objectAssign=require("object-assign");module.exports=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).implementation||global.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:function(r,n){return new e(function(e){return r.error.subscribe(function(r){return e.error(r)}),r.progress.subscribe(function(r){return e.next(objectAssign({type:"progress"},r))}),r.response.subscribe(function(r){e.next(objectAssign({type:"response"},r)),e.complete()}),r.request.publish(n),function(){return r.abort.publish()}})}}};

},{"../util/global":15,"object-assign":23}],11:[function(require,module,exports){
"use strict";module.exports=function(){return{onRequest:function(o){if("xhr"===o.adapter){var e=o.request,t=o.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"))}function n(o){return function(e){var n=e.lengthComputable?e.loaded/e.total*100:-1;t.channels.progress.publish({stage:o,percent:n,total:e.total,loaded:e.loaded,lengthComputable:e.lengthComputable})}}}}};

},{}],12:[function(require,module,exports){
"use strict";module.exports=require("./node-progress");

},{"./node-progress":11}],13:[function(require,module,exports){
"use strict";var sameOrigin=require("same-origin"),parseHeaders=require("parse-headers"),noop=function(){},win=window,XmlHttpRequest=win.XMLHttpRequest||noop,hasXhr2="withCredentials"in new XmlHttpRequest,XDomainRequest=hasXhr2?XmlHttpRequest:win.XDomainRequest,adapter="xhr";module.exports=function(e,t){var r=e.options,n=e.applyMiddleware("finalizeOptions",r),o={},s=win&&win.location&&!sameOrigin(win.location.href,n.url),a=e.applyMiddleware("interceptRequest",void 0,{adapter:adapter,context:e});if(a){var i=setTimeout(t,0,null,a);return{abort:function(){return clearTimeout(i)}}}var u=s?new XDomainRequest:new XmlHttpRequest,c=win.XDomainRequest&&u instanceof win.XDomainRequest,d=n.headers,l=!1,p=!1,f=!1;if(u.onerror=R,u.ontimeout=R,u.onabort=function(){l=!0},u.onprogress=function(){},u[c?"onload":"onreadystatechange"]=function(){!function(){if(!m)return;q(),o.socket=setTimeout(function(){return h("ESOCKETTIMEDOUT")},m.socket)}(),l||4!==u.readyState&&!c||0!==u.status&&function(){if(l||p||f)return;if(0===u.status)return void R(new Error("Unknown XHR error"));q(),p=!0,t(null,function(){var e=u.status,t=u.statusText;if(c&&void 0===e)e=200;else{if(e>12e3&&e<12156)return R();e=1223===u.status?204:u.status,t=1223===u.status?"No Content":t}return{body:u.response||u.responseText,url:n.url,method:n.method,headers:c?{}:parseHeaders(u.getAllResponseHeaders()),statusCode:e,statusMessage:t}}())}()},u.open(n.method,n.url,!0),u.withCredentials=!!n.withCredentials,d&&u.setRequestHeader)for(var w in d)d.hasOwnProperty(w)&&u.setRequestHeader(w,d[w]);else if(d&&c)throw new Error("Headers cannot be set on an XDomainRequest object");n.rawBody&&(u.responseType="arraybuffer"),e.applyMiddleware("onRequest",{options:n,adapter:adapter,request:u,context:e}),u.send(n.body||null);var m=n.timeout;return m&&(o.connect=setTimeout(function(){return h("ETIMEDOUT")},m.connect)),{abort:function(){l=!0,u&&u.abort()}};function h(t){f=!0,u.abort();var r=new Error("ESOCKETTIMEDOUT"===t?"Socket timed out on request to "+n.url:"Connection timed out on request to "+n.url);r.code=t,e.channels.error.publish(r)}function q(){(l||u.readyState>=2&&o.connect)&&clearTimeout(o.connect),o.socket&&clearTimeout(o.socket)}function R(){if(!p){q(),p=!0,u=null;var e=new Error("Network error while attempting to reach "+n.url);e.isNetworkError=!0,e.request=n,t(e)}}};

},{"parse-headers":24,"same-origin":53}],14:[function(require,module,exports){
"use strict";module.exports=require("./node-request");

},{"./node-request":13}],15:[function(require,module,exports){
(function (global){
"use strict";"undefined"!=typeof window?module.exports=window:"undefined"!=typeof global?module.exports=global:"undefined"!=typeof self?module.exports=self:module.exports={};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],16:[function(require,module,exports){
"use strict";module.exports=function(r){return function(n,t){for(var e=arguments.length,u=Array(e>2?e-2:0),o=2;o<e;o++)u[o-2]=arguments[o];return r[n].reduce(function(r,n){return n.apply(void 0,[r].concat(u))},t)}};

},{}],17:[function(require,module,exports){
"use strict";var fnToStr=Function.prototype.toString,constructorRegex=/^\s*class\b/,isES6ClassFn=function(t){try{var n=fnToStr.call(t);return constructorRegex.test(n)}catch(t){return!1}},tryFunctionObject=function(t){try{return!isES6ClassFn(t)&&(fnToStr.call(t),!0)}catch(t){return!1}},toStr=Object.prototype.toString,fnClass="[object Function]",genClass="[object GeneratorFunction]",hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(hasToStringTag)return tryFunctionObject(t);if(isES6ClassFn(t))return!1;var n=toStr.call(t);return n===fnClass||n===genClass};

},{}],18:[function(require,module,exports){
"use strict";module.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)};

},{}],19:[function(require,module,exports){
"use strict";var isObject=require("isobject");function isObjectObject(t){return!0===isObject(t)&&"[object Object]"===Object.prototype.toString.call(t)}module.exports=function(t){var e,c;return!1!==isObjectObject(t)&&("function"==typeof(e=t.constructor)&&(!1!==isObjectObject(c=e.prototype)&&!1!==c.hasOwnProperty("isPrototypeOf")))};

},{"isobject":20}],20:[function(require,module,exports){
"use strict";module.exports=function(r){return null!=r&&"object"==typeof r&&!1===Array.isArray(r)};

},{}],21:[function(require,module,exports){
"use strict";var construct="undefined"!=typeof Reflect?Reflect.construct:void 0,defineProperty=Object.defineProperty,captureStackTrace=Error.captureStackTrace;function BaseError(r){void 0!==r&&defineProperty(this,"message",{configurable:!0,value:r,writable:!0});var e=this.constructor.name;void 0!==e&&e!==this.name&&defineProperty(this,"name",{configurable:!0,value:e,writable:!0}),captureStackTrace(this,this.constructor)}void 0===captureStackTrace&&(captureStackTrace=function(r){var e=new Error;defineProperty(r,"stack",{configurable:!0,get:function(){var r=e.stack;return defineProperty(this,"stack",{configurable:!0,value:r,writable:!0}),r},set:function(e){defineProperty(r,"stack",{configurable:!0,value:e,writable:!0})}})}),BaseError.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:BaseError,writable:!0}});var setFunctionName=function(){function r(r,e){return defineProperty(r,"name",{configurable:!0,value:e})}try{var e=function(){};if(r(e,"foo"),"foo"===e.name)return r}catch(r){}}();function makeError(r,e){if(null==e||e===Error)e=BaseError;else if("function"!=typeof e)throw new TypeError("super_ should be a function");var t;if("string"==typeof r)t=r,r=void 0!==construct?function(){return construct(e,arguments,this.constructor)}:function(){e.apply(this,arguments)},void 0!==setFunctionName&&(setFunctionName(r,t),t=void 0);else if("function"!=typeof r)throw new TypeError("constructor should be either a string or a function");r.super_=r.super=e;var o={constructor:{configurable:!0,value:r,writable:!0}};return void 0!==t&&(o.name={configurable:!0,value:t,writable:!0}),r.prototype=Object.create(e.prototype,o),r}exports=module.exports=makeError,exports.BaseError=BaseError;

},{}],22:[function(require,module,exports){
module.exports=function(){var n=[];return{subscribe:function(u){return n.push(u),function(){var r=n.indexOf(u);r>-1&&n.splice(r,1)}},publish:function(){for(var u=0;u<n.length;u++)n[u].apply(null,arguments)}}};

},{}],23:[function(require,module,exports){
"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){for(var s in t=Object(arguments[a]))hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],24:[function(require,module,exports){
var trim=require("trim"),forEach=require("for-each"),isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)};module.exports=function(r){if(!r)return{};var t={};return forEach(trim(r).split("\n"),function(r){var i=r.indexOf(":"),e=trim(r.slice(0,i)).toLowerCase(),o=trim(r.slice(i+1));void 0===t[e]?t[e]=o:isArray(t[e])?t[e].push(o):t[e]=[t[e],o]}),t};

},{"for-each":3,"trim":55}],25:[function(require,module,exports){
"use strict";var undef,has=Object.prototype.hasOwnProperty;function decode(e){return decodeURIComponent(e.replace(/\+/g," "))}function querystring(e){for(var n,r=/([^=?&]+)=?([^&]*)/g,t={};n=r.exec(e);){var o=decode(n[1]),i=decode(n[2]);o in t||(t[o]=i)}return t}function querystringify(e,n){n=n||"";var r,t,o=[];for(t in"string"!=typeof n&&(n="?"),e)has.call(e,t)&&((r=e[t])||null!==r&&r!==undef&&!isNaN(r)||(r=""),o.push(encodeURIComponent(t)+"="+encodeURIComponent(r)));return o.length?n+o.join("&"):""}exports.stringify=querystringify,exports.parse=querystring;

},{}],26:[function(require,module,exports){
"use strict";module.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e};

},{}],27:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var canReportError_1=require("./util/canReportError"),toSubscriber_1=require("./util/toSubscriber"),observable_1=require("../internal/symbol/observable"),pipe_1=require("./util/pipe"),config_1=require("./config"),Observable=function(){function r(r){this._isScalar=!1,r&&(this._subscribe=r)}return r.prototype.lift=function(e){var o=new r;return o.source=this,o.operator=e,o},r.prototype.subscribe=function(r,e,o){var t=this.operator,n=toSubscriber_1.toSubscriber(r,e,o);if(t?t.call(n,this.source):n.add(this.source||config_1.config.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),config_1.config.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},r.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(e){config_1.config.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=e),canReportError_1.canReportError(r)?r.error(e):console.warn(e)}},r.prototype.forEach=function(r,e){var o=this;return new(e=getPromiseCtor(e))(function(e,t){var n;n=o.subscribe(function(e){try{r(e)}catch(r){t(r),n&&n.unsubscribe()}},t,e)})},r.prototype._subscribe=function(r){var e=this.source;return e&&e.subscribe(r)},r.prototype[observable_1.observable]=function(){return this},r.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return 0===r.length?this:pipe_1.pipeFromArray(r)(this)},r.prototype.toPromise=function(r){var e=this;return new(r=getPromiseCtor(r))(function(r,o){var t;e.subscribe(function(r){return t=r},function(r){return o(r)},function(){return r(t)})})},r.create=function(e){return new r(e)},r}();function getPromiseCtor(r){if(r||(r=config_1.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}exports.Observable=Observable;

},{"../internal/symbol/observable":39,"./config":31,"./util/canReportError":43,"./util/pipe":50,"./util/toSubscriber":51}],28:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var config_1=require("./config"),hostReportError_1=require("./util/hostReportError");exports.empty={closed:!0,next:function(r){},error:function(r){if(config_1.config.useDeprecatedSynchronousErrorHandling)throw r;hostReportError_1.hostReportError(r)},complete:function(){}};

},{"./config":31,"./util/hostReportError":45}],29:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var isFunction_1=require("./util/isFunction"),Observer_1=require("./Observer"),Subscription_1=require("./Subscription"),rxSubscriber_1=require("../internal/symbol/rxSubscriber"),config_1=require("./config"),hostReportError_1=require("./util/hostReportError"),Subscriber=function(r){function t(e,n,o){var i=r.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=Observer_1.empty;break;case 1:if(!e){i.destination=Observer_1.empty;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new SafeSubscriber(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new SafeSubscriber(i,e,n,o)}return i}return __extends(t,r),t.prototype[rxSubscriber_1.rxSubscriber]=function(){return this},t.create=function(r,e,n){var o=new t(r,e,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var r=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=t,this._parentSubscription=null,this},t}(Subscription_1.Subscription);exports.Subscriber=Subscriber;var SafeSubscriber=function(r){function t(t,e,n,o){var i,s=r.call(this)||this;s._parentSubscriber=t;var c=s;return isFunction_1.isFunction(e)?i=e:e&&(i=e.next,n=e.error,o=e.complete,e!==Observer_1.empty&&(c=Object.create(e),isFunction_1.isFunction(c.unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=i,s._error=n,s._complete=o,s}return __extends(t,r),t.prototype.next=function(r){if(!this.isStopped&&this._next){var t=this._parentSubscriber;config_1.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,r)&&this.unsubscribe():this.__tryOrUnsub(this._next,r)}},t.prototype.error=function(r){if(!this.isStopped){var t=this._parentSubscriber,e=config_1.config.useDeprecatedSynchronousErrorHandling;if(this._error)e&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,r),this.unsubscribe()):(this.__tryOrUnsub(this._error,r),this.unsubscribe());else if(t.syncErrorThrowable)e?(t.syncErrorValue=r,t.syncErrorThrown=!0):hostReportError_1.hostReportError(r),this.unsubscribe();else{if(this.unsubscribe(),e)throw r;hostReportError_1.hostReportError(r)}}},t.prototype.complete=function(){var r=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};config_1.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(r,t){try{r.call(this._context,t)}catch(r){if(this.unsubscribe(),config_1.config.useDeprecatedSynchronousErrorHandling)throw r;hostReportError_1.hostReportError(r)}},t.prototype.__tryOrSetError=function(r,t,e){if(!config_1.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(t){return config_1.config.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=t,r.syncErrorThrown=!0,!0):(hostReportError_1.hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},t}(Subscriber);exports.SafeSubscriber=SafeSubscriber;

},{"../internal/symbol/rxSubscriber":40,"./Observer":28,"./Subscription":30,"./config":31,"./util/hostReportError":45,"./util/isFunction":47}],30:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isArray_1=require("./util/isArray"),isObject_1=require("./util/isObject"),isFunction_1=require("./util/isFunction"),tryCatch_1=require("./util/tryCatch"),errorObject_1=require("./util/errorObject"),UnsubscriptionError_1=require("./util/UnsubscriptionError"),Subscription=function(){function r(r){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,r&&(this._unsubscribe=r)}var t;return r.prototype.unsubscribe=function(){var r,t=!1;if(!this.closed){var i=this._parent,s=this._parents,e=this._unsubscribe,n=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,c=s?s.length:0;i;)i.remove(this),i=++o<c&&s[o]||null;if(isFunction_1.isFunction(e))tryCatch_1.tryCatch(e).call(this)===errorObject_1.errorObject&&(t=!0,r=r||(errorObject_1.errorObject.e instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(errorObject_1.errorObject.e.errors):[errorObject_1.errorObject.e]));if(isArray_1.isArray(n))for(o=-1,c=n.length;++o<c;){var u=n[o];if(isObject_1.isObject(u))if(tryCatch_1.tryCatch(u.unsubscribe).call(u)===errorObject_1.errorObject){t=!0,r=r||[];var b=errorObject_1.errorObject.e;b instanceof UnsubscriptionError_1.UnsubscriptionError?r=r.concat(flattenUnsubscriptionErrors(b.errors)):r.push(b)}}if(t)throw new UnsubscriptionError_1.UnsubscriptionError(r)}},r.prototype.add=function(t){if(!t||t===r.EMPTY)return r.EMPTY;if(t===this)return this;var i=t;switch(typeof t){case"function":i=new r(t);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var s=i;(i=new r)._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},r.prototype.remove=function(r){var t=this._subscriptions;if(t){var i=t.indexOf(r);-1!==i&&t.splice(i,1)}},r.prototype._addParent=function(r){var t=this._parent,i=this._parents;t&&t!==r?i?-1===i.indexOf(r)&&i.push(r):this._parents=[r]:this._parent=r},r.EMPTY=((t=new r).closed=!0,t),r}();function flattenUnsubscriptionErrors(r){return r.reduce(function(r,t){return r.concat(t instanceof UnsubscriptionError_1.UnsubscriptionError?t.errors:t)},[])}exports.Subscription=Subscription;

},{"./util/UnsubscriptionError":42,"./util/errorObject":44,"./util/isArray":46,"./util/isFunction":47,"./util/isObject":48,"./util/tryCatch":52}],31:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _enable_super_gross_mode_that_will_cause_bad_things=!1;exports.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var r=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+r.stack)}else _enable_super_gross_mode_that_will_cause_bad_things&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_enable_super_gross_mode_that_will_cause_bad_things=e},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};

},{}],32:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable");function empty(e){return e?emptyScheduled(e):exports.EMPTY}function emptyScheduled(e){return new Observable_1.Observable(function(t){return e.schedule(function(){return t.complete()})})}exports.EMPTY=new Observable_1.Observable(function(e){return e.complete()}),exports.empty=empty,exports.emptyScheduled=emptyScheduled;

},{"../Observable":27}],33:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function defaultIfEmpty(t){return void 0===t&&(t=null),function(e){return e.lift(new DefaultIfEmptyOperator(t))}}exports.defaultIfEmpty=defaultIfEmpty;var DefaultIfEmptyOperator=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new DefaultIfEmptySubscriber(t,this.defaultValue))},t}(),DefaultIfEmptySubscriber=function(t){function e(e,r){var n=t.call(this,e)||this;return n.defaultValue=r,n.isEmpty=!0,n}return __extends(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Subscriber_1.Subscriber);

},{"../Subscriber":29}],34:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function i(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function filter(t,r){return function(e){return e.lift(new FilterOperator(t,r))}}exports.filter=filter;var FilterOperator=function(){function t(t,r){this.predicate=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new FilterSubscriber(t,this.predicate,this.thisArg))},t}(),FilterSubscriber=function(t){function r(r,e,i){var n=t.call(this,r)||this;return n.predicate=e,n.thisArg=i,n.count=0,n}return __extends(r,t),r.prototype._next=function(t){var r;try{r=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}r&&this.destination.next(t)},r}(Subscriber_1.Subscriber);

},{"../Subscriber":29}],35:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function map(t,r){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new MapOperator(t,r))}}exports.map=map;var MapOperator=function(){function t(t,r){this.project=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new MapSubscriber(t,this.project,this.thisArg))},t}();exports.MapOperator=MapOperator;var MapSubscriber=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.project=e,o.count=0,o.thisArg=n||o,o}return __extends(r,t),r.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(r)},r}(Subscriber_1.Subscriber);

},{"../Subscriber":29}],36:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var scan_1=require("./scan"),takeLast_1=require("./takeLast"),defaultIfEmpty_1=require("./defaultIfEmpty"),pipe_1=require("../util/pipe");function reduce(e,t){return arguments.length>=2?function(r){return pipe_1.pipe(scan_1.scan(e,t),takeLast_1.takeLast(1),defaultIfEmpty_1.defaultIfEmpty(t))(r)}:function(t){return pipe_1.pipe(scan_1.scan(function(t,r,a){return e(t,r,a+1)}),takeLast_1.takeLast(1))(t)}}exports.reduce=reduce;

},{"../util/pipe":50,"./defaultIfEmpty":33,"./scan":37,"./takeLast":38}],37:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function scan(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new ScanOperator(t,e,r))}}exports.scan=scan;var ScanOperator=function(){function t(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}return t.prototype.call=function(t,e){return e.subscribe(new ScanSubscriber(t,this.accumulator,this.seed,this.hasSeed))},t}(),ScanSubscriber=function(t){function e(e,r,n,i){var s=t.call(this,e)||this;return s.accumulator=r,s._seed=n,s.hasSeed=i,s.index=0,s}return __extends(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(Subscriber_1.Subscriber);

},{"../Subscriber":29}],38:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),empty_1=require("../observable/empty");function takeLast(t){return function(r){return 0===t?empty_1.empty():r.lift(new TakeLastOperator(t))}}exports.takeLast=takeLast;var TakeLastOperator=function(){function t(t){if(this.total=t,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return t.prototype.call=function(t,r){return r.subscribe(new TakeLastSubscriber(t,this.total))},t}(),TakeLastSubscriber=function(t){function r(r,e){var n=t.call(this,r)||this;return n.total=e,n.ring=new Array,n.count=0,n}return __extends(r,t),r.prototype._next=function(t){var r=this.ring,e=this.total,n=this.count++;r.length<e?r.push(t):r[n%e]=t},r.prototype._complete=function(){var t=this.destination,r=this.count;if(r>0)for(var e=this.count>=this.total?this.total:this.count,n=this.ring,o=0;o<e;o++){var i=r++%e;t.next(n[i])}t.complete()},r}(Subscriber_1.Subscriber);

},{"../Subscriber":29,"../observable/empty":32,"../util/ArgumentOutOfRangeError":41}],39:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.observable="function"==typeof Symbol&&Symbol.observable||"@@observable";

},{}],40:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),exports.$$rxSubscriber=exports.rxSubscriber;

},{}],41:[function(require,module,exports){
"use strict";function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Object.defineProperty(exports,"__esModule",{value:!0}),ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),exports.ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;

},{}],42:[function(require,module,exports){
"use strict";function UnsubscriptionErrorImpl(r){return Error.call(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map(function(r,t){return t+1+") "+r.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r,this}Object.defineProperty(exports,"__esModule",{value:!0}),UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),exports.UnsubscriptionError=UnsubscriptionErrorImpl;

},{}],43:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function canReportError(r){for(;r;){var e=r,o=e.closed,t=e.destination,i=e.isStopped;if(o||i)return!1;r=t&&t instanceof Subscriber_1.Subscriber?t:null}return!0}exports.canReportError=canReportError;

},{"../Subscriber":29}],44:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.errorObject={e:{}};

},{}],45:[function(require,module,exports){
"use strict";function hostReportError(r){setTimeout(function(){throw r})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hostReportError=hostReportError;

},{}],46:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length};

},{}],47:[function(require,module,exports){
"use strict";function isFunction(t){return"function"==typeof t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFunction=isFunction;

},{}],48:[function(require,module,exports){
"use strict";function isObject(e){return null!=e&&"object"==typeof e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObject=isObject;

},{}],49:[function(require,module,exports){
"use strict";function noop(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.noop=noop;

},{}],50:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var noop_1=require("./noop");function pipe(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return pipeFromArray(r)}function pipeFromArray(r){return r?1===r.length?r[0]:function(e){return r.reduce(function(r,e){return e(r)},e)}:noop_1.noop}exports.pipe=pipe,exports.pipeFromArray=pipeFromArray;

},{"./noop":49}],51:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),rxSubscriber_1=require("../symbol/rxSubscriber"),Observer_1=require("../Observer");function toSubscriber(r,e,b){if(r){if(r instanceof Subscriber_1.Subscriber)return r;if(r[rxSubscriber_1.rxSubscriber])return r[rxSubscriber_1.rxSubscriber]()}return r||e||b?new Subscriber_1.Subscriber(r,e,b):new Subscriber_1.Subscriber(Observer_1.empty)}exports.toSubscriber=toSubscriber;

},{"../Observer":28,"../Subscriber":29,"../symbol/rxSubscriber":40}],52:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tryCatchTarget,errorObject_1=require("./errorObject");function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(r){return errorObject_1.errorObject.e=r,errorObject_1.errorObject}}function tryCatch(r){return tryCatchTarget=r,tryCatcher}exports.tryCatch=tryCatch;

},{"./errorObject":44}],53:[function(require,module,exports){
"use strict";var url=require("url");module.exports=function(o,r,t){if(o===r)return!0;var p=url.parse(o,!1,!0),e=url.parse(r,!1,!0),s=0|p.port||("https"===p.protocol?443:80),u=0|e.port||("https"===e.protocol?443:80),l={proto:p.protocol===e.protocol,hostname:p.hostname===e.hostname,port:s===u};return l.proto&&l.hostname&&(l.port||t)};

},{"url":54}],54:[function(require,module,exports){
"use strict";var regex=/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?:\:(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/;module.exports={regex:regex,parse:function(e){var o=regex.exec(e);return o?{protocol:(o[1]||"").toLowerCase()||void 0,hostname:(o[5]||"").toLowerCase()||void 0,port:o[6]||void 0}:{}}};

},{}],55:[function(require,module,exports){
function trim(r){return r.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(r){return r.replace(/^\s*/,"")},exports.right=function(r){return r.replace(/\s*$/,"")};

},{}],56:[function(require,module,exports){
(function (global){
"use strict";var required=require("requires-port"),qs=require("querystringify"),protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,rules=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};function lolcation(e){var o,t=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).location||{},r={},s=typeof(e=e||t);if("blob:"===e.protocol)r=new Url(unescape(e.pathname),{});else if("string"===s)for(o in r=new Url(e,{}),ignore)delete r[o];else if("object"===s){for(o in e)o in ignore||(r[o]=e[o]);void 0===r.slashes&&(r.slashes=slashes.test(e.href))}return r}function extractProtocol(e){var o=protocolre.exec(e);return{protocol:o[1]?o[1].toLowerCase():"",slashes:!!o[2],rest:o[3]}}function resolve(e,o){for(var t=(o||"/").split("/").slice(0,-1).concat(e.split("/")),r=t.length,s=t[r-1],a=!1,n=0;r--;)"."===t[r]?t.splice(r,1):".."===t[r]?(t.splice(r,1),n++):n&&(0===r&&(a=!0),t.splice(r,1),n--);return a&&t.unshift(""),"."!==s&&".."!==s||t.push(""),t.join("/")}function Url(e,o,t){if(!(this instanceof Url))return new Url(e,o,t);var r,s,a,n,l,i,c=rules.slice(),h=typeof o,p=this,u=0;for("object"!==h&&"string"!==h&&(t=o,o=null),t&&"function"!=typeof t&&(t=qs.parse),o=lolcation(o),r=!(s=extractProtocol(e||"")).protocol&&!s.slashes,p.slashes=s.slashes||r&&o.slashes,p.protocol=s.protocol||o.protocol||"",e=s.rest,s.slashes||(c[3]=[/(.*)/,"pathname"]);u<c.length;u++)"function"!=typeof(n=c[u])?(a=n[0],i=n[1],a!=a?p[i]=e:"string"==typeof a?~(l=e.indexOf(a))&&("number"==typeof n[2]?(p[i]=e.slice(0,l),e=e.slice(l+n[2])):(p[i]=e.slice(l),e=e.slice(0,l))):(l=a.exec(e))&&(p[i]=l[1],e=e.slice(0,l.index)),p[i]=p[i]||r&&n[3]&&o[i]||"",n[4]&&(p[i]=p[i].toLowerCase())):e=n(e);t&&(p.query=t(p.query)),r&&o.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==o.pathname)&&(p.pathname=resolve(p.pathname,o.pathname)),required(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(n=p.auth.split(":"),p.username=n[0]||"",p.password=n[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}function set(e,o,t){var r=this;switch(e){case"query":"string"==typeof o&&o.length&&(o=(t||qs.parse)(o)),r[e]=o;break;case"port":r[e]=o,required(o,r.protocol)?o&&(r.host=r.hostname+":"+o):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=o,r.port&&(o+=":"+r.port),r.host=o;break;case"host":r[e]=o,/:\d+$/.test(o)?(o=o.split(":"),r.port=o.pop(),r.hostname=o.join(":")):(r.hostname=o,r.port="");break;case"protocol":r.protocol=o.toLowerCase(),r.slashes=!t;break;case"pathname":case"hash":if(o){var s="pathname"===e?"/":"#";r[e]=o.charAt(0)!==s?s+o:o}else r[e]=o;break;default:r[e]=o}for(var a=0;a<rules.length;a++){var n=rules[a];n[4]&&(r[n[1]]=r[n[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function toString(e){e&&"function"==typeof e||(e=qs.stringify);var o,t=this,r=t.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(t.slashes?"//":"");return t.username&&(s+=t.username,t.password&&(s+=":"+t.password),s+="@"),s+=t.host+t.pathname,(o="object"==typeof t.query?e(t.query):t.query)&&(s+="?"!==o.charAt(0)?"?"+o:o),t.hash&&(s+=t.hash),s}Url.prototype={set:set,toString:toString},Url.extractProtocol=extractProtocol,Url.location=lolcation,Url.qs=qs,module.exports=Url;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"querystringify":25,"requires-port":26}],57:[function(require,module,exports){
"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}var assign=require("object-assign"),_require=require("@sanity/observable/operators/map"),map=_require.map,_require2=require("@sanity/observable/operators/filter"),filter=_require2.filter,queryString=require("../http/queryString"),validators=require("../validators");function AssetsClient(e){this.client=e}function toDocument(e){var t=e.document;return Object.defineProperty(t,"document",{enumerable:!1,get:function(){return console.warn("The promise returned from client.asset.upload(...) now resolves with the asset document"),t}}),t}function optionsFromFile(e,t){return"undefined"!=typeof window&&t instanceof window.File?assign({filename:!1===e.preserveFilename?void 0:t.name,contentType:t.type},e):e}assign(AssetsClient.prototype,{upload:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};validators.validateAssetType(e);var n=r.extract||void 0;n&&!n.length&&(n=["none"]);var i=validators.hasDataset(this.client.clientConfig),a="image"===e?"images":"files",o=optionsFromFile(r,t),s={label:o.label,filename:o.filename,meta:n},l=this.client._requestObservable({method:"POST",timeout:o.timeout||0,uri:"/assets/".concat(a,"/").concat(i),headers:o.contentType?{"Content-Type":o.contentType}:{},query:s,body:t});return this.client.isPromiseAPI()?l.pipe(filter(function(e){return"response"===e.type}),map(function(e){return toDocument(e.body)})).toPromise():l},delete:function(e,t){console.warn("client.assets.delete() is deprecated, please use client.delete(<document-id>)");var r=t||"";return/^(image|file)-/.test(r)?e._id&&(r=e._id):r="".concat(e,"-").concat(r),validators.hasDataset(this.client.clientConfig),this.client.delete(r)},getImageUrl:function(e,t){var r=e._ref||e;if("string"!=typeof r)throw new Error("getImageUrl() needs either an object with a _ref, or a string with an asset document ID");if(!/^image-[A-Za-z0-9_]+-\d+x\d+-[a-z]{1,5}$/.test(r))throw new Error('Unsupported asset ID "'.concat(r,'". URL generation only works for auto-generated IDs.'));var n=_slicedToArray(r.split("-"),4),i=n[1],a=n[2],o=n[3];validators.hasDataset(this.client.clientConfig);var s=this.client.clientConfig,l=s.projectId,c=s.dataset,u=t?queryString(t):"";return"https://cdn.sanity.io/images/".concat(l,"/").concat(c,"/").concat(i,"-").concat(a,".").concat(o).concat(u)}}),module.exports=AssetsClient;

},{"../http/queryString":68,"../validators":78,"@sanity/observable/operators/filter":83,"@sanity/observable/operators/map":84,"object-assign":23}],58:[function(require,module,exports){
"use strict";var assign=require("object-assign");function AuthClient(t){this.client=t}assign(AuthClient.prototype,{getLoginProviders:function(){return this.client.request({uri:"/auth/providers"})},logout:function(){return this.client.request({uri:"/auth/logout",method:"POST"})}}),module.exports=AuthClient;

},{"object-assign":23}],59:[function(require,module,exports){
"use strict";var generateHelpUrl=require("@sanity/generate-help-url"),assign=require("object-assign"),validate=require("./validators"),once=require("./util/once"),defaultCdnHost="apicdn.sanity.io",defaultConfig={apiHost:"https://api.sanity.io",useProjectHostname:!0,gradientMode:!1,isPromiseAPI:!0},LOCALHOSTS=["localhost","127.0.0.1","0.0.0.0"],isLocal=function(e){return-1!==LOCALHOSTS.indexOf(e)},createWarningPrinter=function(e){return once(function(){return console.warn(e.join(" "))})},printCdnWarning=createWarningPrinter(["You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and","cheaper. Think about it! For more info, see ".concat(generateHelpUrl("js-client-cdn-configuration"),"."),"To hide this warning, please set the `useCdn` option to either `true` or `false` when creating","the client."]),printBrowserTokenWarning=createWarningPrinter(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(generateHelpUrl("js-client-browser-token")," for more information and how to hide this warning.")]),printCdnTokenWarning=createWarningPrinter(["You have set `useCdn` to `true` while also specifying a token. This is usually not what you","want. The CDN cannot be used with an authorization token, since private data cannot be cached.","See ".concat(generateHelpUrl("js-client-usecdn-token")," for more information.")]);exports.defaultConfig=defaultConfig,exports.initConfig=function(e,n){var t=assign({},defaultConfig,n,e),o=t.gradientMode,i=!o&&t.useProjectHostname;if("undefined"==typeof Promise){var a=generateHelpUrl("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(a))}if(o&&!t.namespace)throw new Error("Configuration must contain `namespace` when running in gradient mode");if(i&&!t.projectId)throw new Error("Configuration must contain `projectId`");var r="undefined"!=typeof window&&window.location&&window.location.hostname,s=r&&isLocal(window.location.hostname);if(r&&s&&t.token&&!0!==t.ignoreBrowserTokenWarning?printBrowserTokenWarning():(!r||s)&&t.useCdn&&t.token?printCdnTokenWarning():void 0===t.useCdn&&printCdnWarning(),i&&validate.projectId(t.projectId),!o&&t.dataset&&validate.dataset(t.dataset,t.gradientMode),t.isDefaultApi=t.apiHost===defaultConfig.apiHost,t.useCdn=Boolean(t.useCdn)&&!t.token&&!t.withCredentials,t.gradientMode)t.url=t.apiHost,t.cdnUrl=t.apiHost;else{var c=t.apiHost.split("://",2),d=c[0],u=c[1],l=t.isDefaultApi?defaultCdnHost:u;t.useProjectHostname?(t.url="".concat(d,"://").concat(t.projectId,".").concat(u,"/v1"),t.cdnUrl="".concat(d,"://").concat(t.projectId,".").concat(l,"/v1")):(t.url="".concat(t.apiHost,"/v1"),t.cdnUrl=t.url)}return t};

},{"./util/once":76,"./validators":78,"@sanity/generate-help-url":80,"object-assign":23}],60:[function(require,module,exports){
"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var assign=require("object-assign"),_require=require("@sanity/observable/operators/filter"),filter=_require.filter,_require2=require("@sanity/observable/operators/map"),map=_require2.map,validators=require("../validators"),getSelection=require("../util/getSelection"),encodeQueryString=require("./encodeQueryString"),Transaction=require("./transaction"),Patch=require("./patch"),listen=require("./listen"),excludeFalsey=function(e,t){return!1===e?void 0:void 0===e?t:e},getMutationQuery=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{returnIds:!0,returnDocuments:excludeFalsey(e.returnDocuments,!0),visibility:e.visibility||"sync"}},isResponse=function(e){return"response"===e.type},getBody=function(e){return e.body},toPromise=function(e){return e.toPromise()},getQuerySizeLimit=11264;module.exports={listen:listen,getDataUrl:function(e,t){var r=this.clientConfig,n=r.gradientMode?r.namespace:validators.hasDataset(r),i="/".concat(e,"/").concat(n),a=t?"".concat(i,"/").concat(t):i;return(this.clientConfig.gradientMode?a:"/data".concat(a)).replace(/\/($|\?)/,"$1")},fetch:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=!1===r.filterResponse?function(e){return e}:function(e){return e.result},i=this._dataRequest("query",{query:e,params:t},r).pipe(map(n));return this.isPromiseAPI()?toPromise(i):i},getDocument:function(e){var t={uri:this.getDataUrl("doc",e),json:!0},r=this._requestObservable(t).pipe(filter(isResponse),map(function(e){return e.body.documents&&e.body.documents[0]}));return this.isPromiseAPI()?toPromise(r):r},create:function(e,t){return this._create(e,"create",t)},createIfNotExists:function(e,t){return validators.requireDocumentId("createIfNotExists",e),this._create(e,"createIfNotExists",t)},createOrReplace:function(e,t){return validators.requireDocumentId("createOrReplace",e),this._create(e,"createOrReplace",t)},patch:function(e,t){return new Patch(e,t,this)},delete:function(e,t){return this.dataRequest("mutate",{mutations:[{delete:getSelection(e)}]},t)},mutate:function(e,t){var r=e instanceof Patch||e instanceof Transaction?e.serialize():e,n=Array.isArray(r)?r:[r],i=t&&t.transactionId;return this.dataRequest("mutate",{mutations:n,transactionId:i},t)},transaction:function(e){return new Transaction(e,this)},dataRequest:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this._dataRequest(e,t,r);return this.isPromiseAPI()?toPromise(n):n},_dataRequest:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="mutate"===e,i=!n&&encodeQueryString(t),a=!n&&i.length<getQuerySizeLimit,o=a?i:"",u=r.returnFirst,s=r.timeout,c=r.token,d={method:a?"GET":"POST",uri:this.getDataUrl(e,o),json:!0,body:a?void 0:t,query:n&&getMutationQuery(r),timeout:s,token:c};return this._requestObservable(d).pipe(filter(isResponse),map(getBody),map(function(e){if(!n)return e;var t=e.results||[];if(r.returnDocuments)return u?t[0]&&t[0].document:t.map(function(e){return e.document});var i=u?"documentId":"documentIds",a=u?t[0]&&t[0].id:t.map(function(e){return e.id});return _defineProperty({transactionId:e.transactionId,results:t},i,a)}))},_create:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=_defineProperty({},t,e),i=assign({returnFirst:!0,returnDocuments:!0},r);return this.dataRequest("mutate",{mutations:[n]},i)}};

},{"../util/getSelection":75,"../validators":78,"./encodeQueryString":61,"./listen":62,"./patch":63,"./transaction":64,"@sanity/observable/operators/filter":83,"@sanity/observable/operators/map":84,"object-assign":23}],61:[function(require,module,exports){
"use strict";var enc=encodeURIComponent;module.exports=function(c){var n=c.query,e=c.params,t=void 0===e?{}:e,o=c.options,r=void 0===o?{}:o,a="?query=".concat(enc(n)),u=Object.keys(t).reduce(function(c,n){return"".concat(c,"&").concat(enc("$".concat(n)),"=").concat(enc(JSON.stringify(t[n])))},a);return Object.keys(r).reduce(function(c,n){return r[n]?"".concat(c,"&").concat(enc(n),"=").concat(enc(r[n])):c},u)};

},{}],62:[function(require,module,exports){
"use strict";var assign=require("object-assign"),Observable=require("@sanity/observable/minimal"),polyfilledEventSource=require("@sanity/eventsource"),pick=require("../util/pick"),defaults=require("../util/defaults"),encodeQueryString=require("./encodeQueryString"),generateHelpUrl=require("@sanity/generate-help-url"),once=require("../util/once"),tokenWarning=["Using token with listeners is not supported in browsers. ","For more info, see ".concat(generateHelpUrl("js-client-listener-tokens-browser"),".")],printTokenWarning=once(function(){return console.warn(tokenWarning.join(" "))}),isWindowEventSource=Boolean("undefined"!=typeof window&&window.EventSource),EventSource=isWindowEventSource?window.EventSource:polyfilledEventSource,possibleOptions=["includePreviousRevision","includeResult"],defaultOptions={includeResult:!0};function parseEvent(e){try{var r=e.data&&JSON.parse(e.data)||{};return assign({type:e.type},r)}catch(e){return e}}function cooerceError(e){if(e instanceof Error)return e;var r=parseEvent(e);return r instanceof Error?r:new Error(extractErrorMessage(r))}function extractErrorMessage(e){return e.error?e.error.description?e.error.description:"string"==typeof e.error?e.error:JSON.stringify(e.error,null,2):e.message||"Unknown listener error"}module.exports=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=defaults(n,defaultOptions),o=pick(t,possibleOptions),i=encodeQueryString({query:e,params:r,options:o}),s=this.clientConfig,c=s.url,u=s.token,a=s.withCredentials,l="".concat(c).concat(this.getDataUrl("listen",i)),d=t.events?t.events:["mutation"],v=-1!==d.indexOf("reconnect");u&&isWindowEventSource&&printTokenWarning();var f={};return(u||a)&&(f.withCredentials=!0),u&&(f.headers={Authorization:"Bearer ".concat(u)}),new Observable(function(e){var r,n=a(),t=!1;function o(){t||(v&&e.next({type:"reconnect"}),t||n.readyState===EventSource.CLOSED&&(u(),clearTimeout(r),r=setTimeout(E,100)))}function i(r){e.error(cooerceError(r))}function s(r){var n=parseEvent(r);return n instanceof Error?e.error(n):e.next(n)}function c(r){t=!0,u(),e.complete()}function u(){n.removeEventListener("error",o,!1),n.removeEventListener("channelError",i,!1),n.removeEventListener("disconnect",c,!1),d.forEach(function(e){return n.removeEventListener(e,s,!1)}),n.close()}function a(){var e=new EventSource(l,f);return e.addEventListener("error",o,!1),e.addEventListener("channelError",i,!1),e.addEventListener("disconnect",c,!1),d.forEach(function(r){return e.addEventListener(r,s,!1)}),e}function E(){n=a()}return function(){t=!0,u()}})};

},{"../util/defaults":74,"../util/once":76,"../util/pick":77,"./encodeQueryString":61,"@sanity/eventsource":79,"@sanity/generate-help-url":80,"@sanity/observable/minimal":82,"object-assign":23}],63:[function(require,module,exports){
"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var deepAssign=require("deep-assign"),assign=require("object-assign"),getSelection=require("../util/getSelection"),validate=require("../validators"),validateObject=validate.validateObject,validateInsert=validate.validateInsert;function Patch(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.selection=t,this.operations=assign({},e),this.client=i}assign(Patch.prototype,{clone:function(){return new Patch(this.selection,assign({},this.operations),this.client)},merge:function(t){validateObject("merge",t);var e=(new Error).stack.toString().split("\n").filter(function(t){return t.trim()}).slice(2);return console.warn('The "merge" patch has been deprecated and will be removed in the future\n'.concat(e.join("\n"))),this._assign("merge",deepAssign(this.operations.merge||{},t))},set:function(t){return this._assign("set",t)},diffMatchPatch:function(t){return validateObject("diffMatchPatch",t),this._assign("diffMatchPatch",t)},unset:function(t){if(!Array.isArray(t))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=assign({},this.operations,{unset:t}),this},setIfMissing:function(t){return this._assign("setIfMissing",t)},replace:function(t){return validateObject("replace",t),this._set("set",{$:t})},inc:function(t){return this._assign("inc",t)},dec:function(t){return this._assign("dec",t)},insert:function(t,e,i){var n;return validateInsert(t,e,i),this._assign("insert",(_defineProperty(n={},t,e),_defineProperty(n,"items",i),n))},append:function(t,e){return this.insert("after","".concat(t,"[-1]"),e)},prepend:function(t,e){return this.insert("before","".concat(t,"[0]"),e)},splice:function(t,e,i,n){var r=e<0?e-1:e,s=void 0===i||-1===i?-1:Math.max(0,e+i),a=r<0&&s>=0?"":s,o="".concat(t,"[").concat(r,":").concat(a,"]");return this.insert("replace",o,n||[])},ifRevisionId:function(t){return this.operations.ifRevisionID=t,this},serialize:function(){return assign(getSelection(this.selection),this.operations)},toJSON:function(){return this.serialize()},commit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.client)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");var e="string"==typeof this.selection,i=assign({returnFirst:e,returnDocuments:!0},t);return this.client.mutate({patch:this.serialize()},i)},reset:function(){return this.operations={},this},_set:function(t,e){return this._assign(t,e,!1)},_assign:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return validateObject(t,e),this.operations=assign({},this.operations,_defineProperty({},t,assign({},i&&this.operations[t]||{},e))),this}}),module.exports=Patch;

},{"../util/getSelection":75,"../validators":78,"deep-assign":1,"object-assign":23}],64:[function(require,module,exports){
"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var assign=require("object-assign"),validators=require("../validators"),Patch=require("./patch"),defaultMutateOptions={returnDocuments:!1};function Transaction(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.trxId=i,this.operations=t,this.client=e}assign(Transaction.prototype,{clone:function(){return new Transaction(this.operations.slice(0),this.client,this.trxId)},create:function(t){return validators.validateObject("create",t),this._add({create:t})},createIfNotExists:function(t){var e="createIfNotExists";return validators.validateObject(e,t),validators.requireDocumentId(e,t),this._add(_defineProperty({},e,t))},createOrReplace:function(t){var e="createOrReplace";return validators.validateObject(e,t),validators.requireDocumentId(e,t),this._add(_defineProperty({},e,t))},delete:function(t){return validators.validateDocumentId("delete",t),this._add({delete:{id:t}})},patch:function(t,e){var i="function"==typeof e;if(t instanceof Patch)return this._add({patch:t.serialize()});if(i){var r=e(new Patch(t,{},this.client));if(!(r instanceof Patch))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:r.serialize()})}return this._add({patch:assign({id:t},e)})},transactionId:function(t){return t?(this.trxId=t,this):this.trxId},serialize:function(){return this.operations.slice()},toJSON:function(){return this.serialize()},commit:function(t){if(!this.client)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.client.mutate(this.serialize(),assign({transactionId:this.trxId},defaultMutateOptions,t||{}))},reset:function(){return this.operations=[],this},_add:function(t){return this.operations.push(t),this}}),module.exports=Transaction;

},{"../validators":78,"./patch":63,"object-assign":23}],65:[function(require,module,exports){
"use strict";var assign=require("object-assign"),validate=require("../validators");function DatasetsClient(t){this.request=t.request.bind(t)}assign(DatasetsClient.prototype,{create:function(t,e){return this._modify("PUT",t,e)},edit:function(t,e){return this._modify("PATCH",t,e)},delete:function(t){return this._modify("DELETE",t)},list:function(){return this.request({uri:"/datasets"})},_modify:function(t,e,i){return validate.dataset(e),this.request({method:t,uri:"/datasets/".concat(e),body:i})}}),module.exports=DatasetsClient;

},{"../validators":78,"object-assign":23}],66:[function(require,module,exports){
"use strict";module.exports=[];

},{}],67:[function(require,module,exports){
"use strict";var makeError=require("make-error"),assign=require("object-assign");function ClientError(r){var e=extractErrorProps(r);ClientError.super.call(this,e.message),assign(this,e)}function ServerError(r){var e=extractErrorProps(r);ServerError.super.call(this,e.message),assign(this,e)}function extractErrorProps(r){var e=r.body,s={response:r,statusCode:r.statusCode,responseBody:stringifyBody(e,r)};return e.error&&e.message?(s.message="".concat(e.error," - ").concat(e.message),s):e.error&&e.error.description?(s.message=e.error.description,s.details=e.error,s):(s.message=e.error||e.message||httpErrorMessage(r),s)}function httpErrorMessage(r){var e=r.statusMessage?" ".concat(r.statusMessage):"";return"".concat(r.method,"-request to ").concat(r.url," resulted in HTTP ").concat(r.statusCode).concat(e)}function stringifyBody(r,e){return-1!==(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")?JSON.stringify(r,null,2):r}makeError(ClientError),makeError(ServerError),exports.ClientError=ClientError,exports.ServerError=ServerError;

},{"make-error":21,"object-assign":23}],68:[function(require,module,exports){
"use strict";module.exports=function(n){var o=[];for(var e in n)n.hasOwnProperty(e)&&o.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e])));return o.length>0?"?".concat(o.join("&")):""};

},{}],69:[function(require,module,exports){
"use strict";var getIt=require("get-it"),assign=require("object-assign"),observable=require("get-it/lib/middleware/observable"),jsonRequest=require("get-it/lib/middleware/jsonRequest"),jsonResponse=require("get-it/lib/middleware/jsonResponse"),progress=require("get-it/lib/middleware/progress"),Observable=require("@sanity/observable/minimal"),_require=require("./errors"),ClientError=_require.ClientError,ServerError=_require.ServerError,httpError={onResponse:function(e){if(e.statusCode>=500)throw new ServerError(e);if(e.statusCode>=400)throw new ClientError(e);return e}},envSpecific=require("./nodeMiddleware"),middleware=envSpecific.concat([jsonRequest(),jsonResponse(),progress(),httpError,observable({implementation:Observable})]),request=getIt(middleware);function httpRequest(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:request)(assign({maxRedirects:0},e))}httpRequest.defaultRequester=request,httpRequest.ClientError=ClientError,httpRequest.ServerError=ServerError,module.exports=httpRequest;

},{"./errors":67,"./nodeMiddleware":66,"@sanity/observable/minimal":82,"get-it":4,"get-it/lib/middleware/jsonRequest":8,"get-it/lib/middleware/jsonResponse":9,"get-it/lib/middleware/observable":10,"get-it/lib/middleware/progress":12,"object-assign":23}],70:[function(require,module,exports){
"use strict";var assign=require("object-assign"),projectHeader="X-Sanity-Project-ID";module.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},r=t.token||e.token;r&&(o.Authorization="Bearer ".concat(r)),!e.useProjectHostname&&e.projectId&&(o[projectHeader]=e.projectId);var i=void 0===t.timeout?e.timeout:t.timeout;return assign({},t,{headers:assign({},o,t.headers||{}),timeout:void 0===i?3e5:i,json:!0,withCredentials:Boolean(e.token||e.withCredentials)})};

},{"object-assign":23}],71:[function(require,module,exports){
"use strict";var assign=require("object-assign");function ProjectsClient(t){this.client=t}assign(ProjectsClient.prototype,{list:function(){return this.client.request({uri:"/projects"})},getById:function(t){return this.client.request({uri:"/projects/".concat(t)})}}),module.exports=ProjectsClient;

},{"object-assign":23}],72:[function(require,module,exports){
"use strict";var assign=require("object-assign"),_require=require("@sanity/observable/operators/filter"),filter=_require.filter,_require2=require("@sanity/observable/operators/map"),map=_require2.map,Patch=require("./data/patch"),Transaction=require("./data/transaction"),dataMethods=require("./data/dataMethods"),DatasetsClient=require("./datasets/datasetsClient"),ProjectsClient=require("./projects/projectsClient"),AssetsClient=require("./assets/assetsClient"),UsersClient=require("./users/usersClient"),AuthClient=require("./auth/authClient"),httpRequest=require("./http/request"),getRequestOptions=require("./http/requestOptions"),_require3=require("./config"),defaultConfig=_require3.defaultConfig,initConfig=_require3.initConfig,toPromise=function(e){return e.toPromise()};function SanityClient(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultConfig;if(!(this instanceof SanityClient))return new SanityClient(e);if(this.config(e),this.assets=new AssetsClient(this),this.datasets=new DatasetsClient(this),this.projects=new ProjectsClient(this),this.users=new UsersClient(this),this.auth=new AuthClient(this),this.clientConfig.isPromiseAPI){var t=assign({},this.clientConfig,{isPromiseAPI:!1});this.observable=new SanityClient(t)}}assign(SanityClient.prototype,dataMethods),assign(SanityClient.prototype,{clone:function(){return new SanityClient(this.config())},config:function(e){if(void 0===e)return assign({},this.clientConfig);if(this.observable){var t=assign({},e,{isPromiseAPI:!1});this.observable.config(t)}return this.clientConfig=initConfig(e,this.clientConfig||{}),this},getUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.clientConfig.cdnUrl:this.clientConfig.url;return"".concat(t,"/").concat(e.replace(/^\//,""))},isPromiseAPI:function(){return this.clientConfig.isPromiseAPI},_requestObservable:function(e){var t=e.url||e.uri,i=this.clientConfig.useCdn&&["GET","HEAD"].indexOf(e.method||"GET")>=0&&0===t.indexOf("/data/"),n=getRequestOptions(this.clientConfig,assign({},e,{url:this.getUrl(t,i)}));return httpRequest(n,this.clientConfig.requester)},request:function(e){var t=this._requestObservable(e).pipe(filter(function(e){return"response"===e.type}),map(function(e){return e.body}));return this.isPromiseAPI()?toPromise(t):t}}),SanityClient.Patch=Patch,SanityClient.Transaction=Transaction,SanityClient.ClientError=httpRequest.ClientError,SanityClient.ServerError=httpRequest.ServerError,SanityClient.requester=httpRequest.defaultRequester,module.exports=SanityClient;

},{"./assets/assetsClient":57,"./auth/authClient":58,"./config":59,"./data/dataMethods":60,"./data/patch":63,"./data/transaction":64,"./datasets/datasetsClient":65,"./http/request":69,"./http/requestOptions":70,"./projects/projectsClient":71,"./users/usersClient":73,"@sanity/observable/operators/filter":83,"@sanity/observable/operators/map":84,"object-assign":23}],73:[function(require,module,exports){
"use strict";var assign=require("object-assign");function UsersClient(e){this.client=e}assign(UsersClient.prototype,{getById:function(e){return this.client.request({uri:"/users/".concat(e)})}}),module.exports=UsersClient;

},{"object-assign":23}],74:[function(require,module,exports){
"use strict";module.exports=function(e,t){return Object.keys(t).concat(Object.keys(e)).reduce(function(c,n){return c[n]=void 0===e[n]?t[n]:e[n],c},{})};

},{}],75:[function(require,module,exports){
"use strict";module.exports=function(r){if("string"==typeof r||Array.isArray(r))return{id:r};if(r&&r.query)return{query:r.query};var n=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join("\n");throw new Error("Unknown selection - must be one of:\n\n".concat(n))};

},{}],76:[function(require,module,exports){
"use strict";module.exports=function(r){var t,n=!1;return function(){return n?t:(t=r.apply(void 0,arguments),n=!0,t)}};

},{}],77:[function(require,module,exports){
"use strict";module.exports=function(e,r){return r.reduce(function(r,t){return void 0===e[t]?r:(r[t]=e[t],r)},{})};

},{}],78:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var VALID_ASSET_TYPES=["image","file"],VALID_INSERT_LOCATIONS=["before","after","replace"];exports.dataset=function(t){if(!/^[-\w]{1,128}$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes")},exports.projectId=function(t){if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},exports.validateAssetType=function(t){if(-1===VALID_ASSET_TYPES.indexOf(t))throw new Error("Invalid asset type: ".concat(t,". Must be one of ").concat(VALID_ASSET_TYPES.join(", ")))},exports.validateObject=function(t,e){if(null===e||"object"!==_typeof(e)||Array.isArray(e))throw new Error("".concat(t,"() takes an object of properties"))},exports.requireDocumentId=function(t,e){if(!e._id)throw new Error("".concat(t,'() requires that the document contains an ID ("_id" property)'));exports.validateDocumentId(t,e._id)},exports.validateDocumentId=function(t,e){if("string"!=typeof e||!/^[a-z0-9_.-]+$/i.test(e))throw new Error("".concat(t,'(): "').concat(e,'" is not a valid document ID'))},exports.validateInsert=function(t,e,r){var o="insert(at, selector, items)";if(-1===VALID_INSERT_LOCATIONS.indexOf(t)){var n=VALID_INSERT_LOCATIONS.map(function(t){return'"'.concat(t,'"')}).join(", ");throw new Error("".concat(o,' takes an "at"-argument which is one of: ').concat(n))}if("string"!=typeof e)throw new Error("".concat(o,' takes a "selector"-argument which must be a string'));if(!Array.isArray(r))throw new Error("".concat(o,' takes an "items"-argument which must be an array'))},exports.hasDataset=function(t){if(!t.gradientMode&&!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset||""};

},{}],79:[function(require,module,exports){
var evs=require("eventsource-polyfill/dist/eventsource");module.exports=window.EventSource||evs.EventSource;

},{"eventsource-polyfill/dist/eventsource":2}],80:[function(require,module,exports){
var baseUrl="https://docs.sanity.io/help/";module.exports=function(e){return baseUrl+e};

},{}],81:[function(require,module,exports){
"use strict";var _require=require("rxjs/internal/Observable"),Observable=_require.Observable,assign=require("object-assign"),_require2=require("../operators/map"),map=_require2.map,_require3=require("../operators/filter"),filter=_require3.filter,_require4=require("../operators/reduce"),reduce=_require4.reduce;function SanityObservableMinimal(){Observable.apply(this,arguments)}function createDeprecatedMemberOp(e,r){var a=!1;return function(){return a||(a=!0,console.warn(new Error("Calling observable.".concat(e,"(...) is deprecated. Please use observable.pipe(").concat(e,"(...)) instead")))),this.pipe(r.apply(this,arguments))}}SanityObservableMinimal.prototype=Object.create(assign(Object.create(null),Observable.prototype)),Object.defineProperty(SanityObservableMinimal.prototype,"constructor",{value:SanityObservableMinimal,enumerable:!1,writable:!0,configurable:!0}),SanityObservableMinimal.prototype.lift=function(e){var r=new SanityObservableMinimal;return r.source=this,r.operator=e,r},SanityObservableMinimal.prototype.map=createDeprecatedMemberOp("map",map),SanityObservableMinimal.prototype.filter=createDeprecatedMemberOp("filter",filter),SanityObservableMinimal.prototype.reduce=createDeprecatedMemberOp("filter",reduce),module.exports=SanityObservableMinimal;

},{"../operators/filter":83,"../operators/map":84,"../operators/reduce":85,"object-assign":23,"rxjs/internal/Observable":27}],82:[function(require,module,exports){
module.exports=require("./lib/SanityObservableMinimal");

},{"./lib/SanityObservableMinimal":81}],83:[function(require,module,exports){
exports.filter=require("rxjs/internal/operators/filter").filter;

},{"rxjs/internal/operators/filter":34}],84:[function(require,module,exports){
exports.map=require("rxjs/internal/operators/map").map;

},{"rxjs/internal/operators/map":35}],85:[function(require,module,exports){
exports.reduce=require("rxjs/internal/operators/reduce").reduce;

},{"rxjs/internal/operators/reduce":36}]},{},[72])(72)
});
