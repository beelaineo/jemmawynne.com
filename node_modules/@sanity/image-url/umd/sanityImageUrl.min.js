!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SanityImageUrlBuilder=t()}}(function(){return function(){return function t(e,n,r){function o(u,a){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){return o(e[u][1][t]||t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}}()({1:[function(t,e,n){e.exports=t("./lib/builder").default},{"./lib/builder":2}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t&&"object"===i(t.clientConfig)?new h(null,{baseUrl:t.clientConfig.apiHost.replace(/^https:\/\/api\./,"https://cdn."),projectId:t.clientConfig.projectId,dataset:t.clientConfig.dataset}):new h(null,t)};var r,o=(r=t("./urlForImage"))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=["clip","crop","fill","fillmax","max","scale","min"],f=["top","bottom","left","right","center","focalpoint","entropy"],l=["format"],h=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=e?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){u(t,e,n[e])})}return t}({},e.options||{},n||{}):n||{}}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"withOptions",value:function(e){return new t(this,e)}},{key:"image",value:function(t){return this.withOptions({source:t})}},{key:"dataset",value:function(t){return this.withOptions({dataset:t})}},{key:"projectId",value:function(t){return this.withOptions({projectId:t})}},{key:"bg",value:function(t){return this.withOptions({bg:t})}},{key:"width",value:function(t){return this.withOptions({width:t})}},{key:"height",value:function(t){return this.withOptions({height:t})}},{key:"focalPoint",value:function(t,e){return this.withOptions({focalPoint:{x:t,y:e}})}},{key:"maxWidth",value:function(t){return this.withOptions({maxWidth:t})}},{key:"minWidth",value:function(t){return this.withOptions({minWidth:t})}},{key:"maxHeight",value:function(t){return this.withOptions({maxHeight:t})}},{key:"minHeight",value:function(t){return this.withOptions({minHeight:t})}},{key:"size",value:function(t,e){return this.withOptions({width:t,height:e})}},{key:"blur",value:function(t){return this.withOptions({blur:t})}},{key:"sharpen",value:function(t){return this.withOptions({sharpen:t})}},{key:"rect",value:function(t,e,n,r){return this.withOptions({rect:{left:t,top:e,width:n,height:r}})}},{key:"format",value:function(t){return this.withOptions({format:t})}},{key:"invert",value:function(t){return this.withOptions({invert:t})}},{key:"orientation",value:function(t){return this.withOptions({orientation:t})}},{key:"quality",value:function(t){return this.withOptions({quality:t})}},{key:"forceDownload",value:function(t){return this.withOptions({download:t})}},{key:"flipHorizontal",value:function(){return this.withOptions({flipHorizontal:!0})}},{key:"flipVertical",value:function(){return this.withOptions({flipVertical:!0})}},{key:"ignoreImageParams",value:function(){return this.withOptions({ignoreImageParams:!0})}},{key:"fit",value:function(t){if(-1===c.indexOf(t))throw new Error('Invalid fit mode "'.concat(t,'"'));return this.withOptions({fit:t})}},{key:"crop",value:function(t){if(-1===f.indexOf(t))throw new Error('Invalid crop mode "'.concat(t,'"'));return this.withOptions({crop:t})}},{key:"auto",value:function(t){if(-1===l.indexOf(t))throw new Error('Invalid auto mode "'.concat(t,'"'));return this.withOptions({auto:t})}},{key:"url",value:function(){return(0,o.default)(this.options)}},{key:"toString",value:function(){return this.url()}}]),t}()},{"./urlForImage":5}],3:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=r(t.split("-"),4),n=e[1],i=e[2],u=e[3];if(!n||!i||!u)throw new Error("Malformed asset _ref '".concat(t,"'. Expected an id like \"").concat(o,'".'));var a=r(i.split("x"),2),c=+a[0],f=+a[1];if(!isFinite(c)||!isFinite(f))throw new Error("Malformed asset _ref '".concat(t,"'. Expected an id like \"").concat(o,'".'));return{id:n,width:c,height:f,format:u}};var o="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg"},{}],4:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var e=t.split("/").slice(-1);return"image-".concat(e[0]).replace(/\.([a-z]+)$/,"-$1")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if(!t)return null;var e;if("string"==typeof t&&function(t){return/^https?:\/\//.test("".concat(t))}(t))e={asset:{_ref:o(t)}};else if("string"==typeof t)e={asset:{_ref:t}};else if("string"==typeof t._ref)e={asset:t};else if(t._id)e={asset:{_ref:t._id}};else if(t.asset&&t.asset.url&&!t.asset._ref)e={asset:{_ref:o(t.asset.url)}};else{if("object"!==r(t.asset))return null;e=t}return t.crop&&(e.crop=t.crop),t.hotspot&&(e.hotspot=t.hotspot),function(t){if(t.crop&&t.hotspot)return t;var e=Object.assign({},t);return e.crop||(e.crop={left:0,top:0,bottom:0,right:0}),e.hotspot||(e.hotspot={x:.5,y:.5,height:1,width:1}),e}(e)}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=u({},t||{}),n=e.source;delete e.source;var i=(0,r.default)(n);if(!i)return null;var a=(0,o.default)(i.asset._ref||i.asset._id),f={left:Math.round(i.crop.left*a.width),top:Math.round(i.crop.top*a.height)};f.width=Math.round(a.width-i.crop.right*a.width-f.left),f.height=Math.round(a.height-i.crop.bottom*a.height-f.top);var l=i.hotspot.height*a.height/2,h=i.hotspot.width*a.width/2,s=i.hotspot.x*a.width,p=i.hotspot.y*a.height,d={left:s-h,top:p-l,right:s+h,bottom:p+l};return e.asset=a,e.rect||e.focalPoint||e.ignoreImageParams||e.crop||(e=u({},e,function(t,e){var n={width:e.width,height:e.height};if(!e.width||!e.height)return n.rect=t.crop,n;var r=t.crop,o=t.hotspot,i=e.width/e.height;if(r.width/r.height>i){var u=r.height,a=u*i,c=r.top,f=(o.right-o.left)/2+o.left-a/2;return f<r.left?f=r.left:f+a>r.left+r.width&&(f=r.left+r.width-a),n.rect={left:Math.round(f),top:Math.round(c),width:Math.round(a),height:Math.round(u)},n}var l=r.width,h=l/i,s=r.left,p=(o.bottom-o.top)/2+o.top-h/2;return p<r.top?p=r.top:p+h>r.top+r.height&&(p=r.top+r.height-h),n.rect={left:Math.max(0,Math.floor(s)),top:Math.max(0,Math.floor(p)),width:Math.round(l),height:Math.round(h)},n}({crop:f,hotspot:d},e))),function(t){var e=t.baseUrl||"https://cdn.sanity.io",n="".concat(t.asset.id,"-").concat(t.asset.width,"x").concat(t.asset.height,".").concat(t.asset.format),r="".concat(e,"/images/").concat(t.projectId,"/").concat(t.dataset,"/").concat(n),o=[];return t.rect&&(0!=t.rect.left||0!=t.rect.top||t.rect.height!=t.asset.height||t.rect.width!=t.asset.width)&&o.push("rect=".concat(t.rect.left,",").concat(t.rect.top,",").concat(t.rect.width,",").concat(t.rect.height)),t.bg&&o.push("bg=".concat(t.bg)),t.focalPoint&&(o.push("fp-x=".concat(t.focalPoint.x)),o.push("fp-x=".concat(t.focalPoint.y))),(t.flipHorizontal||t.flipVertical)&&o.push("flip=".concat(t.flipHorizontal?"h":"").concat(t.flipVertical?"v":"")),c.forEach(function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,2),r=n[0],i=n[1];void 0!==t[r]?o.push("".concat(i,"=").concat(encodeURIComponent(t[r]))):void 0!==t[i]&&o.push("".concat(i,"=").concat(encodeURIComponent(t[i])))}),0===o.length?r:"".concat(r,"?").concat(o.join("&"))}(e)},Object.defineProperty(n,"parseSource",{enumerable:!0,get:function(){return r.default}});var r=i(t("./parseSource")),o=i(t("./parseAssetId"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){a(t,e,n[e])})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["auto","auto"]]},{"./parseAssetId":3,"./parseSource":4}]},{},[1])(1)});
