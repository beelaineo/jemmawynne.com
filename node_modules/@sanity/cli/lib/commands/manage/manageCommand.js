"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _path = _interopRequireDefault(require("path"));

var _opn = _interopRequireDefault(require("opn"));

var _fsExtra = _interopRequireDefault(require("fs-extra"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = {
  name: 'manage',
  signature: 'manage',
  description: 'Opens the Sanity project management UI',

  async action(args, context) {
    const {
      workDir,
      output
    } = context;
    const {
      print
    } = output;

    const configLocation = _path.default.join(workDir, 'sanity.json');

    let projectId;

    try {
      const config = await _fsExtra.default.readJson(configLocation);
      projectId = config.api && config.api.projectId;
    } catch (err) {// Noop.
    }

    const url = projectId ? `https://manage.sanity.io/projects/${projectId}` : 'https://manage.sanity.io/';
    print(`Opening ${url}`);
    (0, _opn.default)(url, {
      wait: false
    });
  }

};
exports.default = _default;