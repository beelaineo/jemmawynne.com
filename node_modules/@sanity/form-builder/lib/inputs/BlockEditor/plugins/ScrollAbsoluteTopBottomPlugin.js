"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = ScrollAbsoluteTopBottomPlugin;

// This plugin scrolls the scrollcontainer to absolute top or bottom if first block or last block is selected
function ScrollAbsoluteTopBottomPlugin(scrollContainer) {
  return {
    // eslint-disable-next-line complexity
    onChange(editor, next) {
      var _editor$value = editor.value,
          focusBlock = _editor$value.focusBlock,
          anchorBlock = _editor$value.anchorBlock,
          document = _editor$value.document,
          selection = _editor$value.selection;

      if (!(scrollContainer && scrollContainer.current)) {
        return next();
      }

      if (!focusBlock) {
        return next();
      }

      if (focusBlock.key === anchorBlock.key) {
        var isFirstBlock = focusBlock.key === document.nodes.first().key;
        var isStartOffset = selection.focus.offset === 0;

        if (isFirstBlock && isStartOffset) {
          scrollContainer.current.scrollTo({
            left: 0,
            top: 0,
            behavior: 'smooth'
          });
        }
      }

      return next();
    }

  };
}