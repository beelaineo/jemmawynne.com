"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var _reactInk = _interopRequireDefault(require("react-ink"));

var _closeIcon = _interopRequireDefault(require("part:@sanity/base/close-icon"));

var _searchIcon = _interopRequireDefault(require("part:@sanity/base/search-icon"));

var _hotkeys = _interopRequireDefault(require("part:@sanity/components/typography/hotkeys"));

var _SearchField = _interopRequireDefault(require("./styles/SearchField.css"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class SearchField extends _react.default.PureComponent {
  constructor() {
    super(...arguments);

    _defineProperty(this, "inputElement", null);

    _defineProperty(this, "setInputElement", ref => {
      this.inputElement = ref;
    });
  }

  render() {
    var _this$props = this.props,
        hotkeys = _this$props.hotkeys,
        isBleeding = _this$props.isBleeding,
        isFocused = _this$props.isFocused,
        isOpen = _this$props.isOpen,
        onBlur = _this$props.onBlur,
        onChange = _this$props.onChange,
        onClear = _this$props.onClear,
        onFocus = _this$props.onFocus,
        onKeyDown = _this$props.onKeyDown,
        onMouseDown = _this$props.onMouseDown,
        placeholder = _this$props.placeholder,
        results = _this$props.results,
        value = _this$props.value;
    var className = _SearchField.default.root;
    if (isBleeding) className += " ".concat(_SearchField.default.isBleeding);
    if (isFocused) className += " ".concat(_SearchField.default.isFocused);
    if (isOpen) className += " ".concat(_SearchField.default.isOpen);
    if (value.length) className += " ".concat(_SearchField.default.hasValue);
    return _react.default.createElement("div", {
      className: className,
      onMouseDown: onMouseDown
    }, _react.default.createElement("div", {
      className: _SearchField.default.inputField
    }, _react.default.createElement("label", {
      className: _SearchField.default.label
    }, _react.default.createElement(_searchIcon.default, null)), _react.default.createElement("input", {
      className: _SearchField.default.input,
      type: "text",
      value: value,
      onChange: onChange,
      onBlur: onBlur,
      onFocus: onFocus,
      onKeyDown: onKeyDown,
      placeholder: placeholder,
      ref: this.setInputElement
    }), hotkeys && _react.default.createElement("div", {
      className: _SearchField.default.hotkeys
    }, _react.default.createElement(_hotkeys.default, {
      keys: hotkeys
    })), _react.default.createElement("div", {
      className: value ? _SearchField.default.clearButtonWithValue : _SearchField.default.clearButton,
      onClick: onClear,
      title: "Clear search"
    }, _react.default.createElement(_closeIcon.default, null), _react.default.createElement(_reactInk.default, {
      duration: 1000,
      opacity: 0.1,
      radius: 200
    }))), _react.default.createElement("div", {
      className: _SearchField.default.results
    }, results));
  }

}

_defineProperty(SearchField, "propTypes", {
  hotkeys: _propTypes.default.arrayOf(_propTypes.default.string),
  isBleeding: _propTypes.default.bool,
  isFocused: _propTypes.default.bool,
  isOpen: _propTypes.default.bool,
  onBlur: _propTypes.default.func,
  onChange: _propTypes.default.func,
  onClear: _propTypes.default.func,
  onFocus: _propTypes.default.func,
  onKeyDown: _propTypes.default.func,
  onMouseDown: _propTypes.default.func,
  placeholder: _propTypes.default.string,
  results: _propTypes.default.element,
  value: _propTypes.default.string.isRequired
});

_defineProperty(SearchField, "defaultProps", {
  hotkeys: undefined,
  isBleeding: false,
  isFocused: false,
  isOpen: false,
  onBlur: undefined,
  onChange: undefined,
  onClear: undefined,
  onFocus: undefined,
  onKeyDown: undefined,
  onMouseDown: undefined,
  placeholder: 'Search',
  results: null
});

var _default = SearchField;
exports.default = _default;